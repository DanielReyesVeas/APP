<div class="box">
  <div class="col-sm-12">
    <h2><i class="fa fa-credit-card-alt"></i> Gestión de Cuentas</h2>

    <div class="col-sm-5 pull-right" ng-if="!isCuentas && cargado">
      <div class="alert alert-danger">
        <i class="fa fa-exclamation-triangle fa-3x" style="margin-right: 20px;"> </i>
        <b>Hay Aportes sin sus respectivas Cuentas.</b>
        <p>Debe asignarlas todas para poder realizar la Centralización.</p>
      </div>
    </div> 

    <div class="col-sm-8 col-sm-offset-2" ng-if="cargado">
      <ul class="nav nav-tabs form-tabs" style="margin-bottom: 40px;">
        <li class="active"><a data-toggle="tab" ng-click="openTab('aportes')">Aportes</a></li>
        <li class=""> <a data-toggle="tab" ng-click="openTab('afpEmpleador')">AFPs</a></li>
        <li class=""> <a data-toggle="tab" ng-click="openTab('salud')">Salud</a></li>
        <li class=""> <a data-toggle="tab" ng-click="openTab('seguroCesantiaEmpleador')">Seguro Cesantía</a></li>
        <li class=""> <a data-toggle="tab" ng-click="openTab('apvA')">APVs</a></li>
        <li ng-if="empresa.isCaja" class=""> <a data-toggle="tab" ng-click="openTab('ccaf')">CCAF</a></li>
        <li class=""> <a data-toggle="tab" ng-click="openTab('imp')">Haberes</a></li>
        <li class=""> <a data-toggle="tab" ng-click="openTab('descuentos')">Descuentos</a></li>
        <li class=""> <a data-toggle="tab" ng-click="openTab('exCaja')">Ex Cajas</a></li>
      </ul>

      <div class="col-sm-12" ng-if="tabAportes">

        <table class="table table-striped table-hover" ng-if="aportes.length>0">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="aporte in aportes">
              <td>{{ $index + 1 }}</td>
              <td>{{ aporte.nombre }}</td>
              <td ng-if="aporte.cuenta.nombre">{{ aporte.cuenta.nombre }}</td>
              <td ng-if="!aporte.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar && accesos.abierto" ng-click="editar(aporte)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

      <div class="col-sm-12" ng-if="tabAfpEmpleador || tabAfpTrabajador || tabCuentasAhorroAfp">

        <ul class="nav nav-tabs form-tabs" style="margin-bottom: 40px;">
          <li class="active"><a data-toggle="tab" ng-click="openTab('afpEmpleador')">Empleador</a></li>
          <li class=""> <a data-toggle="tab" ng-click="openTab('afpTrabajador')">Trabajador</a></li>
          <li class=""> <a data-toggle="tab" ng-click="openTab('cuentasAhorroAfp')">Cuentas de Ahorro</a></li>
        </ul>

        <table class="table table-striped table-hover" ng-if="afpsEmpleador.length>0 && tabAfpEmpleador">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="afp in afpsEmpleador">
              <td>{{ $index + 1 }}</td>
              <td>{{ afp.nombre }}</td>
              <td ng-if="afp.cuenta.nombre">{{ afp.cuenta.nombre }}</td>
              <td ng-if="!afp.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editar(afp)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

        <table class="table table-striped table-hover" ng-if="afpsTrabajador.length>0 && tabAfpTrabajador">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="afp in afpsTrabajador">
              <td>{{ $index + 1 }}</td>
              <td>{{ afp.nombre }}</td>
              <td ng-if="afp.cuenta.nombre">{{ afp.cuenta.nombre }}</td>
              <td ng-if="!afp.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editar(afp)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

        <table class="table table-striped table-hover" ng-if="cuentasAhorroAfps.length>0 && tabCuentasAhorroAfp">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="afp in cuentasAhorroAfps">
              <td>{{ $index + 1 }}</td>
              <td>{{ afp.nombre }}</td>
              <td ng-if="afp.cuenta.nombre">{{ afp.cuenta.nombre }}</td>
              <td ng-if="!afp.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarDescuento(afp)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>    

      </div>

      <div class="col-sm-12" ng-if="tabSalud">

        <table class="table table-striped table-hover" ng-if="salud.length>0 && tabSalud">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="isapre in salud">
              <td>{{ $index + 1 }}</td>
              <td>{{ isapre.nombre }}</td>
              <td ng-if="isapre.cuenta.nombre">{{ isapre.cuenta.nombre }}</td>
              <td ng-if="!isapre.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarDescuento(isapre)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

      <div class="col-sm-12" ng-if="tabSeguroCesantiaEmpleador || tabSeguroCesantiaTrabajador">

        <ul class="nav nav-tabs form-tabs" style="margin-bottom: 40px;">
          <li class="active"><a data-toggle="tab" ng-click="openTab('seguroCesantiaEmpleador')">Empleador</a></li>
          <li class=""> <a data-toggle="tab" ng-click="openTab('seguroCesantiaTrabajador')">Trabajador</a></li>
        </ul>

        <table class="table table-striped table-hover" ng-if="seguroCesantiaEmpleador.length>0 && tabSeguroCesantiaEmpleador">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="seguro in seguroCesantiaEmpleador">
              <td>{{ $index + 1 }}</td>
              <td>{{ seguro.nombre }}</td>
              <td ng-if="seguro.cuenta.nombre">{{ seguro.cuenta.nombre }}</td>
              <td ng-if="!seguro.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editar(seguro)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

        <table class="table table-striped table-hover" ng-if="seguroCesantiaTrabajador.length>0 && tabSeguroCesantiaTrabajador">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="seguro in seguroCesantiaTrabajador">
              <td>{{ $index + 1 }}</td>
              <td>{{ seguro.nombre }}</td>
              <td ng-if="seguro.cuenta.nombre">{{ seguro.cuenta.nombre }}</td>
              <td ng-if="!seguro.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editar(seguro)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

      <div class="col-sm-12" ng-if="tabApvA || tabApvB || tabApvc">

        <ul class="nav nav-tabs form-tabs" style="margin-bottom: 40px;">
          <li class="active"><a data-toggle="tab" ng-click="openTab('apvA')">Régimen A</a></li>
          <li class=""> <a data-toggle="tab" ng-click="openTab('apvB')">Régimen B</a></li>
          <li class=""> <a data-toggle="tab" ng-click="openTab('apvc')">APVCs</a></li>
        </ul>

        <table class="table table-striped table-hover" ng-if="apvsA.length>0 && tabApvA">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="apv in apvsA">
              <td>{{ $index + 1 }}</td>
              <td>{{ apv.nombre }}</td>
              <td ng-if="apv.cuenta.nombre">{{ apv.cuenta.nombre }}</td>
              <td ng-if="!apv.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarDescuento(apv)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

        <table class="table table-striped table-hover" ng-if="apvsB.length>0 && tabApvB">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="apv in apvsB">
              <td>{{ $index + 1 }}</td>
              <td>{{ apv.nombre }}</td>
              <td ng-if="apv.cuenta.nombre">{{ apv.cuenta.nombre }}</td>
              <td ng-if="!apv.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarDescuento(apv)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

        <table class="table table-striped table-hover" ng-if="apvcs.length>0 && tabApvc">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="apvc in apvcs">
              <td>{{ $index + 1 }}</td>
              <td>{{ apvc.nombre }}</td>
              <td ng-if="apvc.cuenta.nombre">{{ apvc.cuenta.nombre }}</td>
              <td ng-if="!apvc.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarDescuento(apvc)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

      <div class="col-sm-12" ng-if="tabCCAF">

        <table class="table table-striped table-hover" ng-if="ccafs.length>0">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="ccaf in ccafs">
              <td>{{ $index + 1 }}</td>
              <td>{{ ccaf.nombre }}</td>
              <td ng-if="ccaf.cuenta.nombre">{{ ccaf.cuenta.nombre }}</td>
              <td ng-if="!ccaf.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarDescuento(ccaf)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

      <div class="col-sm-12" ng-if="tabExCaja">

        <table class="table table-striped table-hover" ng-if="exCajas.length>0">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-6">Concepto</th> 
            <th class="col-sm-4">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="exCaja in exCajas">
              <td>{{ $index + 1 }}</td>
              <td>{{ exCaja.nombre }}</td>
              <td ng-if="exCaja.cuenta.nombre">{{ exCaja.cuenta.nombre }}</td>
              <td ng-if="!exCaja.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editar(exCaja)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

      <div class="col-sm-12" ng-if="tabHaberesImp || tabHaberesNoImp">

        <ul class="nav nav-tabs form-tabs" style="margin-bottom: 40px;">
          <li class="active"><a data-toggle="tab" ng-click="openTab('imp')">Imponibles</a></li>
          <li class=""> <a data-toggle="tab" ng-click="openTab('noImp')">No Imponibles</a></li>
        </ul>

        <table class="table table-striped table-hover" ng-if="haberesImp.length>0 && tabHaberesImp">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="haber in haberesImp">
              <td>{{ $index + 1 }}</td>
              <td>{{ haber.nombre }}</td>
              <td ng-if="haber.cuenta.nombre">{{ haber.cuenta.nombre }}</td>
              <td ng-if="!haber.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarHaber(haber)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

        <table class="table table-striped table-hover" ng-if="haberesNoImp.length>0 && tabHaberesNoImp">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="haber in haberesNoImp">
              <td>{{ $index + 1 }}</td>
              <td>{{ haber.nombre }}</td>
              <td ng-if="haber.cuenta.nombre">{{ haber.cuenta.nombre }}</td>
              <td ng-if="!haber.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarHaber(haber)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

      <div class="col-sm-12" ng-if="tabDescuentos || tabDescuentosLegales">

        <ul class="nav nav-tabs form-tabs" style="margin-bottom: 40px;">
          <li class="active"><a data-toggle="tab" ng-click="openTab('descuentos')">Mis Descuentos</a></li>
          <li class=""> <a data-toggle="tab" ng-click="openTab('descuentosLegales')">Descuentos Legales</a></li>
        </ul>

        <table class="table table-striped table-hover" ng-if="descuentos.length>0 && tabDescuentos">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="descuento in descuentos">
              <td>{{ $index + 1 }}</td>
              <td>{{ descuento.nombre }}</td>
              <td ng-if="descuento.cuenta.nombre">{{ descuento.cuenta.nombre }}</td>
              <td ng-if="!descuento.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarDescuento(descuento)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

        <table class="table table-striped table-hover" ng-if="descuentosLegales.length>0 && tabDescuentosLegales">
          <thead>
          <tr>
            <th class="col-sm-1">#</th> 
            <th class="col-sm-5">Concepto</th> 
            <th class="col-sm-5">Cuenta</th> 
            <th class="col-sm-1"></th>
          </tr>
          </thead>
          <tbody>
            <tr ng-repeat="descuento in descuentosLegales">
              <td>{{ $index + 1 }}</td>
              <td>{{ descuento.nombre }}</td>
              <td ng-if="descuento.cuenta.nombre">{{ descuento.cuenta.nombre }}</td>
              <td ng-if="!descuento.cuenta.nombre"><i class="text-danger">Sin Asignar</i></td>
              <td class="text-right">
                <a href="" ng-if="accesos.editar" ng-click="editarDescuento(descuento)"><i class="fa fa fa fa-pencil"></i></a>
              </td>
            </tr>
          </tbody>
        </table>

      </div>

    </div>

  </div>
</div>