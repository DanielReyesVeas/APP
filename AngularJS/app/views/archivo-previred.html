<div class="box">
  <div class="row">
    <div class="column col-sm-12">
      <div class="padding">
        <h2> <i class="fa fa-arrow-circle-right"> </i> Archivo Previred</h2>

        <div class="col-sm-12" ng-if="isGenerar && cargado && accesos.crear && accesos.abierto">
          <a ng-click="generarArchivo()" href="" class="btn btn-primary pull-right"><i class="fa fa-download"></i> Generar Archivo</a>
        </div> 
        <div class="col-sm-12" ng-if="!isGenerar && cargado">
          <a href="#liquidaciones-de-sueldo">
            <div class="alert alert-danger pull-right">
              <i class="fa fa-exclamation-triangle fa-3x" style="margin-right: 20px;"> </i>
              <b>Hay Liquidaciones pendientes.</b>
              <p>Debe ingresarlas todas para poder generar el archivo Previred.</p>
            </div>
          </a>
        </div> 

        <div class="row" style="margin-top: 50px;">

          <div class="container text-center" ng-if="cargado && datos.length<=0" style="margin-top: 40px;" >
            <i>No se existen trabajadores activos</i>
          </div>

          <table class="table table-striped table-hover" ng-if="cargado && datos.length>0">
            <thead>
              <tr>    
                <th class="col-sm-1">#</th>
                <th class="col-sm-1">RUT</th>
                <th class="col-sm-3">Nombre</th>
                <th class="col-sm-2">Cargo</th>
                <th class="col-sm-1">Fecha Ingreso</th>
                <th class="col-sm-1">Contrato</th>
                <th class="col-sm-1">Sueldo Base</th>
                <th class="col-sm-1">Estado</th>
                <th class="col-sm-1"></th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="trabajador in datos">
                <td>{{ $index + 1 }}</td>
                <td>{{ trabajador.rutFormato }}</td>
                <td>{{ trabajador.nombreCompleto }}</td>
                <td>{{ trabajador.cargo.nombre }}</td>
                <td>{{ trabajador.fechaIngreso | date : "dd-MM-y" }}</td>
                <td>{{ trabajador.tipoContrato.nombre }}</td>
                <td>
                  <span ng-if="trabajador.monedaSueldo==='$'">${{ trabajador.sueldoBase | currency :"":0 }}</span>
                  <span ng-if="trabajador.monedaSueldo!=='$'">{{ trabajador.sueldoBase }} {{ trabajador.monedaSueldo }}</span>
                </td>
                <td>{{ trabajador.estado }}</td>
                <td>
                  <i class="fa fa-check text-success" ng-if="trabajador.isLiquidacion"></i>
                  <i class="fa fa-times text-danger" ng-if="!trabajador.isLiquidacion"></i>
                </td>
              </tr>
            </tbody>
          </table>  
        </div>

      </div>
    </div>
  </div>  
</div>