<div class="box">
  <div class="row">
    <div class="column col-sm-12">      
      <h2> <i class="fa fa-user"> </i> Trabajadores</h2>
      <div class="col-sm-12">
        <a ng-click="open()" ng-if="accesos.crear && accesos.abierto" href="" class="btn btn-primary btn-xs pull-right"><i class="fa fa-user-plus"></i> Nuevo Trabajador</a>
      </div>
      <div class="col-sm-12" ng-if="accesos.crear && accesos.abierto" style="margin-bottom: 10px;">
        <div class="btn-group pull-right">
          <button class="btn btn-primary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"> <i class="fa fa-table"></i>
          Planilla de Importación <span class="caret"></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-sm">
            <!--<li><a href="{{ constantes.URL }}/planillas/Planilla-Trabajadores.xlsx" download="Planilla-Trabajadores.xlsx"><i class="fa fa-download"></i> Descargar</a></li>-->
            <li><a target="_self" id="descargarPlanillaTrabajadores" href="{{ constantes.URL }}trabajadores/planilla-trabajadores/descargar" download="trabajadores.xls"><i class="fa fa-download"></i> Descargar planilla</a></li>
            <li><a href="javascript:void(0);" ng-click="importarPlanilla()"><i class="fa fa-upload"></i> Subir</a></li>
          </ul>
        </div>
      </div>
      <div class="col-sm-12">
        <a ng-click="plantillasContratos()" ng-if="accesos.crear && accesos.abierto" href="" class="btn btn-primary btn-xs pull-right"><i class="fa fa-cog"></i> Gestión Plantillas de Contratos</a>
      </div>
      <div class="col-sm-12" ng-if="false">
        <a ng-click="script()" href="" class="btn btn-primary btn-xs pull-right">Script</a>
      </div>
      <div class="container text-center" ng-if="datos.length<=0 && cargado" style="margin-top: 60px;" >
        <i>No se han ingresado trabajadores</i>
      </div>

      <table class="table table-striped table-hover" ng-if="datos.length>0 && cargado" style="margin-top: 60px;">
        <thead>
          <tr>    
            <th class="col-sm-1">#</th>
            <th class="col-sm-1">RUT</th>
            <th class="col-sm-2">Nombre</th>
            <th class="col-sm-2">Cargo</th>
            <th class="col-sm-1">Fecha Ingreso</th>
            <th class="col-sm-2">Contrato</th>
            <th class="col-sm-1">Sueldo Base</th>
            <th class="col-sm-1">Estado</th>
            <th class="col-sm-1"></th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="trabajador in datos">
            <td>{{ $index + 1 }}</td>
            <td>{{ trabajador.rutFormato }}</td>
            <td>{{ trabajador.nombreCompleto }}</td>
            <td>{{ trabajador.cargo.nombre }}</td>
            <td>{{ trabajador.fechaIngreso | date : "dd-MM-y" }}</td>
            <td>{{ trabajador.tipoContrato.nombre }}</td>
            <td>
              <span ng-if="trabajador.monedaSueldo==='$'">${{ trabajador.sueldoBase | currency :"":0 }}</span>
              <span ng-if="trabajador.monedaSueldo!=='$'">{{ trabajador.sueldoBase }} {{ trabajador.monedaSueldo }}</span>
            </td>
            <td>{{ trabajador.estado }}</td>
            <td>
              <a href="" ng-click="editar(trabajador)" ng-if="accesos.editar && accesos.abierto"><i class="fa fa-pencil"></i></a>
              <a href="" ng-click="detalle(trabajador)" ng-if="trabajador.estado ==='Ingresado'"><i class="fa fa-search"></i></a>
              <a href="" ng-if="accesos.eliminar && accesos.abierto" confirmation-click="eliminar(trabajador);" confirmation-needed="El trabajador <b>{{trabajador.rutFormato}}</b> será eliminado del sistema. De igual forma todos sus datos ingresados como haberes, descuentos, documentos, etc. ¿Desea continuar?"><i class="fa fa-trash"></i></a>
              <a href="" ng-click="contratos(trabajador)" ng-if="trabajador.estado ==='Ingresado'"><i class="fa fa-file-text"></i></a>
              <!--<div class="btn-group" id="botonNoOcultar" ng-if="accesos.crear">
                <a href="" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ng-click="noOcultar()"><i class="fa fa-file-text"></i></a>
                <ul class="dropdown-menu pull-right">
                  <li><a href="javascript:void(0);" ng-click="generarContrato(trabajador)">Generar Contrato</a></li>
                  <li><a href="javascript:void(0);" ng-model-rejected="rejFiles" ng-model="trabajador.contrato" ngf-max-size="5MB" ngf-select>Adjuntar Contrato</a></li>
                </ul>
              </div>-->
            </td>
          </tr>
        </tbody>
      </table>    
      

    </div>
  </div>  
</div>